<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ERRO 404</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
    background:#f5f5f5;
    color:#222;
  }
  header{
    background:#000;
    color:#fff;
    padding:15px;
    font-size:22px;
    text-align:center;
    font-weight:bold;
  }
  .chat-container{
    max-width:700px;
    margin:20px auto;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .input-row{
    display:flex;
    gap:10px;
  }
  input[type="text"]{
    flex:1;
    padding:12px;
    border-radius:8px;
    border:1px solid #ccc;
  }
  button{
    padding:12px 16px;
    border:none;
    border-radius:8px;
    background:#007bff;
    color:white;
    cursor:pointer;
    font-weight:bold;
  }
  #response-box{
    background:#fff;
    min-height:200px;
    border-radius:8px;
    padding:12px;
    position:relative;
    overflow-y:auto;
    max-height:400px;
    border:1px solid #ccc;
  }
  .copy-btn{
    position:absolute;
    top:10px;
    right:10px;
    font-size:12px;
    color:#007bff;
    cursor:pointer;
    text-decoration:underline;
    background:none;
    border:none;
  }
  /* DEV PANEL */
  #dev-btn{
    position:fixed;
    bottom:20px;
    right:20px;
    background:#007bff;
    color:#fff;
    padding:12px 16px;
    border-radius:50px;
    cursor:pointer;
    font-weight:bold;
    z-index:100;
  }
  #dev-panel{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.6);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:200;
  }
  #dev-content{
    background:#fff;
    padding:20px;
    border-radius:12px;
    width:90%;
    max-width:400px;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  #dev-content input, #dev-content textarea{
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
  }
  #dev-content button{
    background:#28a745;
  }
</style>
</head>
<body>

<header>ERRO 404</header>

<div class="chat-container">
  <div class="input-row">
    <input type="text" id="user-input" placeholder="DIGITAR">
    <button id="send-btn">ENVIAR</button>
  </div>

  <div id="response-box">
    <button class="copy-btn" id="copy-btn">CÓPIA</button>
    <div id="response-content"></div>
  </div>
</div>

<button id="dev-btn">DEV</button>

<div id="dev-panel">
  <div id="dev-content">
    <label>PROMPT</label>
    <textarea id="new-prompt" placeholder="Digite new prompt"></textarea>
    <label>API KEY</label>
    <input type="text" id="api-key" placeholder="Coloque API Key do Google">
    <button id="save-btn">SALVAR TUDO</button>
  </div>
</div>

<script>
let prompt = "Você é uma IA clara, direta e educativa.";
let apiKey = "";

const userInput = document.getElementById('user-input');
const sendBtn = document.getElementById('send-btn');
const responseBox = document.getElementById('response-box');
const responseContent = document.getElementById('response-content');
const copyBtn = document.getElementById('copy-btn');

const devBtn = document.getElementById('dev-btn');
const devPanel = document.getElementById('dev-panel');
const newPrompt = document.getElementById('new-prompt');
const apiKeyInput = document.getElementById('api-key');
const saveBtn = document.getElementById('save-btn');

// enviar mensagem
sendBtn.onclick = async ()=>{
  const msg = userInput.value.trim();
  if(!msg) return;
  responseContent.innerHTML = '...';
  try{
    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({contents:[{parts:[{text: prompt + "\n\nUsuário: "+msg}]}]})
    });
    const data = await res.json();
    const reply = data?.candidates?.[0]?.content?.[0]?.text || "ERRO NA RESPOSTA";
    responseContent.textContent = reply;
  }catch(e){
    responseContent.textContent = "ERRO: "+e;
  }
  userInput.value='';
}

// copiar
copyBtn.onclick = ()=>{
  navigator.clipboard.writeText(responseContent.textContent);
  copyBtn.textContent = "COPIADO!";
  setTimeout(()=>copyBtn.textContent="CÓPIA",1200);
}

// abrir DEV
devBtn.onclick = ()=> devPanel.style.display='flex';

// salvar prompt e API
saveBtn.onclick = ()=>{
  prompt = newPrompt.value.trim() || prompt;
  apiKey = apiKeyInput.value.trim() || apiKey;
  devPanel.style.display='none';
  alert('Tudo atualizado!');
}

</script>

</body>
  </html>
